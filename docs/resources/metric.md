---
page_title: "statsig_metric Resource - terraform-provider-statsig"
subcategory: ""
description: |-
  
---

# statsig_metric (Resource)

This resource allows you to configure metrics for your Statsig project.

To learn more about metrics, see [Metrics Documentation](https://docs.statsig.com/metrics/101)

To learn more about the API powering this resource, see [Metrics API Documentation](https://docs.statsig.com/console-api/metrics)

-> Note: [Warehouse Native](https://docs.statsig.com/statsig-warehouse-native/introduction/) metrics can only be used in Warehouse Native projects

## Example Usage

```terraform
terraform {
  required_providers {
    statsig = {
      version = "~> 2.0.0"
      source  = "statsig-io/statsig"
    }
  }
}

resource "statsig_metric" "custom_event_count_metric" {
  custom_roll_up_end   = 14
  custom_roll_up_start = 0
  description          = "A short description of this metric."
  directionality       = "decrease"
  is_permanent         = false
  is_read_only         = false
  is_verified          = false
  metric_events = [
    {
      criteria = []
      name     = "test_event_1"
    }
  ]
  name               = "Custom Event Count Metric"
  rollup_time_window = "custom"
  tags               = ["test-tag"]
  type               = "event_count_custom"
  unit_types         = ["userID"]
}

resource "statsig_metric" "warehouse_native_metric" {
  description    = "A short description of this metric."
  directionality = "increase"
  is_permanent   = false
  is_read_only   = false
  is_verified    = false
  warehouse_native = {
    metric_source_name = "shoppy_events"
    aggregation        = "count"
    criteria = [
      {
        type      = "metadata",
        column    = "event",
        condition = "=",
        values    = ["add_to_cart"],
      }
    ]
    cuped_attribution_window = 7
    cap                      = 150
  }
  name       = "Warehouse Native Metric"
  tags       = ["test-tag"]
  type       = "user_warehouse"
  unit_types = ["userID"]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the new metric, which identifies it within the system.
- `type` (String) The type of the metric. Allowed values include sum, ratio, mean, event_count_sum, composite, composite_sum, undefined, funnel, user_warehouse.

### Optional

- `custom_roll_up_end` (Number) Custom time window end date in days since exposure.
- `custom_roll_up_start` (Number) Custom time window start date in days since exposure.
- `description` (String) A description of the new metric, providing context and purpose.
- `directionality` (String) Indicates the desired change direction for the metric. Use "increase" for positive changes and "decrease" for negative changes.
- `dry_run` (Boolean) Skips persisting the metric (used to validate that inputs are correct)
- `funnel_count_distinct` (String) Specifies whether to count events or distinct users for the funnel metric.
- `funnel_event_list` (Attributes List) List of events used to create funnel metrics. (see [below for nested schema](#nestedatt--funnel_event_list))
- `id` (String) id
- `is_permanent` (Boolean) Indicates whether the metric is permanent and should not be deleted.
- `is_read_only` (Boolean) Set to true to make the metric definition editable only from the Console API.
- `is_verified` (Boolean) Marks the metric as verified for internal trustworthiness.
- `metric_component_metrics` (Attributes List) List of input metrics used to calculate the new metric for composite types. (see [below for nested schema](#nestedatt--metric_component_metrics))
- `metric_events` (Attributes List) An array of event definitions used to compute the metric. (see [below for nested schema](#nestedatt--metric_events))
- `rollup_time_window` (String) Time window for the metric rollup. Specify "custom" for a customized time window.
- `tags` (List of String) Tags associated with the metric for categorization and searchability.
- `team` (String) The team associated with the metric, applicable for enterprise environments.
- `team_id` (String) The team ID associated with the metric, applicable for enterprise environments.
- `unit_types` (List of String) Array of unit types associated with the metric, such as stableID or userID.
- `warehouse_native` (Attributes) Defines warehouse native metrics for advanced configurations. (see [below for nested schema](#nestedatt--warehouse_native))

<a id="nestedatt--funnel_event_list"></a>
### Nested Schema for `funnel_event_list`

Required:

- `name` (String) The name of the funnel event used in the metric.
- `type` (String) The type of funnel event, specifying how the event is tracked.


<a id="nestedatt--metric_component_metrics"></a>
### Nested Schema for `metric_component_metrics`

Required:

- `name` (String)
- `type` (String)


<a id="nestedatt--metric_events"></a>
### Nested Schema for `metric_events`

Required:

- `name` (String) The name of the metric event.

Optional:

- `criteria` (Attributes List) Filtering criteria for the metric event, including conditions and values to refine the event data. (see [below for nested schema](#nestedatt--metric_events--criteria))
- `metadata_key` (String) The key for associated metadata, if applicable.
- `type` (String) The type of metric event. Allowed values include: count, count_distinct, value, and metadata.

<a id="nestedatt--metric_events--criteria"></a>
### Nested Schema for `metric_events.criteria`

Required:

- `condition` (String) sql_filter, start_withs, ends_with, and after_exposure are only applicable in Warehouse Native
- `type` (String) Type of event criterion for filtering metrics. Options include `value`, `metadata`, `user`, and `user_custom`; in Warehouse Native, this should always be `metadata`.

Optional:

- `column` (String) Optional column specifying which data attribute to filter on.
- `null_vacuous_override` (Boolean) If true, overrides null values in criterion evaluation.
- `values` (List of String) Optional array of values for the criterion to match against.



<a id="nestedatt--warehouse_native"></a>
### Nested Schema for `warehouse_native`

Optional:

- `aggregation` (String) Allowed: count┃sum┃mean┃daily_participation┃ratio┃funnel┃count_distinct┃percentile
- `allow_null_ratio_denominator` (Boolean) Include units which do not have a denominator. Only applicable to ratios.
- `cap` (Number) Maximum cap for metric values.
- `criteria` (Attributes List) Filtering criteria for the metric source (see [below for nested schema](#nestedatt--warehouse_native--criteria))
- `cuped_attribution_window` (Number) Attribution window for CUPED adjustments in days.
- `custom_roll_up_end` (Number) Custom end date for rollup in days since exposure.
- `custom_roll_up_start` (Number) Custom start date for rollup in days since exposure.
- `denominator_aggregation` (String) Allowed: count┃sum┃mean┃daily_participation┃ratio┃funnel┃count_distinct┃percentile
- `denominator_criteria` (Attributes List) Filtering criteria for the denominator metric source, if this metric is a ratio (see [below for nested schema](#nestedatt--warehouse_native--denominator_criteria))
- `denominator_custom_rollup_end` (Number) Custom end date for rollup in days since exposure.
- `denominator_custom_rollup_start` (Number) Custom start date for rollup in days since exposure.
- `denominator_metric_source_name` (String) Name of the metric source for the denominator.
- `denominator_rollup_time_window` (String) Time window for the denominator metric. Specify "custom" for a custom window.
- `denominator_value_column` (String) Column name for the denominator’s value.
- `funnel_calculation_window` (Number) Duration for counting funnel events in days.
- `funnel_count_distinct` (String) Allowed: users┃sessions for distinct count method in funnel events.
- `funnel_events` (Attributes List) List of funnel events with associated criteria and identifiers. (see [below for nested schema](#nestedatt--warehouse_native--funnel_events))
- `funnel_start_criteria` (String) Allowed: start_event┃exposure to determine funnel start criteria.
- `metric_bake_days` (Number) Number of days for metric baking; specify duration for analysis.
- `metric_dimension_columns` (List of String) Specify metadata columns for breaking down metric analysis.
- `metric_source_name` (String) For Count, Sum, Mean, User Count aggregation types: the name of metric source
- `numerator_aggregation` (String) Aggregation type for numerator; Allowed: count┃sum┃mean┃daily_participation┃ratio┃funnel┃count_distinct┃percentile.
- `only_include_users_with_conversion_event` (Boolean) Flag to include only users with a conversion event in the metric.
- `percentile` (Number) Percentile value for statistical calculations.
- `rollup_time_window` (String) General time window for rollup; can specify custom settings.
- `value_column` (String) Column name representing the metric’s value.
- `value_threshold` (Number) Threshold value for filtering metrics.
- `wait_for_cohort_window` (Boolean)
- `winsorization_high` (Number) High threshold for winsorization; must be between 0 and 1.
- `winsorization_low` (Number) Low threshold for winsorization; must be between 0 and 1.

<a id="nestedatt--warehouse_native--criteria"></a>
### Nested Schema for `warehouse_native.criteria`

Required:

- `condition` (String) sql_filter, start_withs, ends_with, and after_exposure are only applicable in Warehouse Native
- `type` (String) Type of event criterion for filtering metrics. Options include `value`, `metadata`, `user`, and `user_custom`; in Warehouse Native, this should always be `metadata`.

Optional:

- `column` (String) Optional column specifying which data attribute to filter on.
- `null_vacuous_override` (Boolean) If true, overrides null values in criterion evaluation.
- `values` (List of String) Optional array of values for the criterion to match against.


<a id="nestedatt--warehouse_native--denominator_criteria"></a>
### Nested Schema for `warehouse_native.denominator_criteria`

Required:

- `condition` (String) sql_filter, start_withs, ends_with, and after_exposure are only applicable in Warehouse Native
- `type` (String) Type of event criterion for filtering metrics. Options include `value`, `metadata`, `user`, and `user_custom`; in Warehouse Native, this should always be `metadata`.

Optional:

- `column` (String) Optional column specifying which data attribute to filter on.
- `null_vacuous_override` (Boolean) If true, overrides null values in criterion evaluation.
- `values` (List of String) Optional array of values for the criterion to match against.


<a id="nestedatt--warehouse_native--funnel_events"></a>
### Nested Schema for `warehouse_native.funnel_events`

Optional:

- `criteria` (Attributes List) Optional array of criteria to filter the funnel events, defined by various types and conditions. (see [below for nested schema](#nestedatt--warehouse_native--funnel_events--criteria))
- `metric_source_name` (String) Optional name of the metric source associated with the funnel event.
- `name` (String) Optional step name for the funnel event, can be null if not specified.
- `session_identifier_field` (String) Name of column which being used as session identifier. Funnel event with the same metric source

<a id="nestedatt--warehouse_native--funnel_events--criteria"></a>
### Nested Schema for `warehouse_native.funnel_events.criteria`

Required:

- `condition` (String) sql_filter, start_withs, ends_with, and after_exposure are only applicable in Warehouse Native
- `type` (String) Type of event criterion for filtering metrics. Options include `value`, `metadata`, `user`, and `user_custom`; in Warehouse Native, this should always be `metadata`.

Optional:

- `column` (String) Optional column specifying which data attribute to filter on.
- `null_vacuous_override` (Boolean) If true, overrides null values in criterion evaluation.
- `values` (List of String) Optional array of values for the criterion to match against.